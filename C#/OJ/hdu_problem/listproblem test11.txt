<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>[C#] 逆袭――自制日刷千题的AC自动机攻克HDU OJ - beautifulzzzz - 博客园</title>
<link type="text/css" rel="stylesheet" href="/bundles/blog-common.css?v=VDh8zSH1vx51MDqRT7hK220akQ58FjlaaeGuWBPhfOA1"/>
<link id="MainCss" type="text/css" rel="stylesheet" href="/skins/Banlieue13/bundle-Banlieue13.css?v=-BwbBCgL4I6ev4eT0WChGlx86DuTjkHbdqzbBDeklxs1"/>
<link type="text/css" rel="stylesheet" href="/blog/customcss/158504.css?v=DIngXGRx6s68gZ58uySKY3gZwwo%3d"/>
<link title="RSS" type="application/rss+xml" rel="alternate" href="http://www.cnblogs.com/zjutlitao/rss"/>
<link title="RSD" type="application/rsd+xml" rel="EditURI" href="http://www.cnblogs.com/zjutlitao/rsd.xml"/>
<link type="application/wlwmanifest+xml" rel="wlwmanifest" href="http://www.cnblogs.com/zjutlitao/wlwmanifest.xml"/>
<script src="http://common.cnblogs.com/script/jquery.js" type="text/javascript"></script>  
<script type="text/javascript">var currentBlogApp = 'zjutlitao', cb_enable_mathjax=true;</script>
<script src="/bundles/blog-common.js?v=vbkaXm5avsr2WtvnKxjUcV8vZqhUAnl9Uw7BdP992a81" type="text/javascript"></script>
</head>
<body>
<a name="top"></a>
<!--PageBeginHtml Block Begin-->
<div align="right"><img border="0" src="http://cc.amazingcounters.com/counter.php?i=3192678&c=9578347" alt="AmazingCounters.com"></a></div>
<!--PageBeginHtml Block End-->

<!--done-->
<div id="home">
<div id="header">
	<div id="blogTitle">
	<a id="lnkBlogLogo" href="http://www.cnblogs.com/zjutlitao/"><img id="blogLogo" src="/Skins/custom/images/logo.gif" alt="返回主页" /></a>			
		
<!--done-->
<h1><a id="Header1_HeaderTitle" class="headermaintitle" href="http://www.cnblogs.com/zjutlitao/">beautifulzzzz</a></h1>
<h2>把事情做好~</h2>



		
	</div><!--end: blogTitle 博客的标题和副标题 -->
</div><!--end: header 头部 -->

<div id="main">
	<div id="mainContent">
	<div class="forFlow">
		<div id="navigator">
			
<!--done-->
			<ul id="navList">
				<li><a id="MyLinks1_HomeLink" class="menu" href="http://www.cnblogs.com/">博客园</a></li>
				<li><a id="MyLinks1_IngLink" class="menu" href="http://home.cnblogs.com/ing/">闪存</a></li>
				<li><a id="MyLinks1_MyHomeLink" class="menu" href="http://www.cnblogs.com/zjutlitao/">首页</a></li>
				<li></li>
				<li></li>
				<li><a id="MyLinks1_Admin" class="menu" rel="nofollow" href="http://i.cnblogs.com/">管理</a></li>
				<li><a id="MyLinks1_Syndication" class="menu" href="http://www.cnblogs.com/zjutlitao/rss">订阅</a>
				<a id="MyLinks1_XMLLink" class="aHeaderXML" href="http://www.cnblogs.com/zjutlitao/rss"><img src="http://www.cnblogs.com/images/xml.gif" alt="订阅" /></a></li>
			</ul>


			<div class="blogStats">
				
				
<!--done-->
随笔- 339&nbsp;
文章- 2&nbsp;
评论- 411&nbsp;

				
			</div><!--end: blogStats -->
		</div><!--end: navigator 博客导航栏 -->
		
<div id="post_detail">
<!--done-->
<div id="topics">
	<div class = "post">
		<h1 class = "postTitle">
			<a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/zjutlitao/p/4337775.html">[C#] 逆袭――自制日刷千题的AC自动机攻克HDU OJ</a>
		</h1>
		<div class="clear"></div>
		<div class="postBody">
			<div id="cnblogs_post_body"><p>&nbsp;</p>
<p><strong>前言</strong></p>
<p>　　做过杭电、浙大或是北大等ACM题库的人一定对&ldquo;刷题&rdquo;不陌生，以杭电OJ为例：首先打开首页（<a href="http://acm.hdu.edu.cn/" target="_blank">http://acm.hdu.edu.cn/</a>），然后登陆，接着找到&ldquo;Online Exercise&rdquo;下的&ldquo;<span style="text-decoration: none;">Problem Archive&rdquo;</span>，然后从众多题目中选择一个进行读题、构思、编程、然后提交、最后查看题解状态，如果AC了表示这一题被攻克了，否则就要重做了~一般情况下，&ldquo;刷题&rdquo;要求精神高度集中且经验丰富，否则很难成功AC,有时候甚至做一题要浪费半天的时间！（有时网速卡了，比抢火车票还要急！）</p>
<p>　　楼主在这里先给广大辛勤&ldquo;刷题&rdquo;的ACMer赔个不是，因为本文所介绍的AC自动机其实是利用爬虫从网上搜索题目答案，然后再利用C#的web控件和鼠标、键盘事件来自动提交题目的投机式机器人（纯属楼主自娱自乐，多多见谅！）。</p>
<p><span style="color: #ff0000;">注：</span><span style="font-size: 12px;">下图依次是①主页面；②题目列表页面；③题目页面；④提交代码页面；⑤提交结果查看页面</span></p>
<p><img src="http://images.cnitblog.com/blog2015/506370/201503/141624239952249.png" alt="" width="237" height="133" />&nbsp; <img src="http://images.cnitblog.com/blog2015/506370/201503/141625365115204.png" alt="" width="244" height="132" />&nbsp; <img src="http://images.cnitblog.com/blog2015/506370/201503/141627074492385.png" alt="" width="245" height="131" />&nbsp; <img src="http://images.cnitblog.com/blog2015/506370/201503/141629330896478.png" alt="" width="241" height="131" /> <img src="http://images.cnitblog.com/blog2015/506370/201503/141630286052507.png" alt="" width="237" height="129" /></p>
<p><strong>成果</strong></p>
<p>　　参看杭电OJ的RankList<a href="http://acm.hdu.edu.cn/ranklist.php" target="_blank">(http://acm.hdu.edu.cn/ranklist.php)</a>，目前我用这个AC自动机粗略的刷一遍整个题库共提交12391次，解决2688个题目，正确率21.69%，总排名第8。同时我还发现至少2个和我属于同一类的考机器人刷题的&ldquo;捣蛋鬼&rdquo;，其中一个是排名第2到第7的三国蜀国的将领们，另一个是几乎占据17~28名的hdujudge0~n。为什么能发现他们？哈哈，①没人会连续几天不停的刷题的；②总提交数高的离谱；③正确率低的吓人；④我在浙大OJ上也遇到了他们（哈哈哈）。在此，我想邀请二位合伙做一个自动爬题+自动分析代码的题库解析的网站，也算是我们利用自己捣蛋的玩具做的一点好事~嘿嘿~（此外，我非常佩服排名第一的那位，如果是人刷的其毅力和能力绝对一流；如果是机器刷的，能达到53.80%的正确率也是非常高明的爬虫！）</p>
<p><img src="http://images.cnitblog.com/blog2015/506370/201503/141650375277405.png" alt="" width="737" height="402" /></p>
<p><strong>业务流程与状态转换机</strong></p>
<p>　　其业务流程主要是模拟人在浏览器里的操作过程，从登陆到搜索，从搜索再到提交，从提交再到获取提交状态，如果AC了就转到下一题，如果没有AC就进行第二次尝试（每道题目进行10次尝试），如果中间出现异常就直接进行下一次尝试，来保证程序顺利进行。其整个过程通过下面四个状态变量来控制。状态转换正常情况下发生在webBrowser1_DocumentCompleted以及timer1_Tick事件中，其中前一个事件是每次web文档加载完毕时响应，后一个事件是每隔一定时间响应，此外当代码提取和状态提取的web文档解析线程中如果发生异常，也会触发状态转变。</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span> <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;summary&gt;</span>
<span style="color: #008080;"> 2</span> <span style="color: #808080;">///</span><span style="color: #008000;"> 0初始状态；1填写用户名和密码状态；2输入找到的代码；3查看是否AC；
</span><span style="color: #008080;"> 3</span> <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;/summary&gt;</span>
<span style="color: #008080;"> 4</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">int</span> input_state = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 5</span> <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;summary&gt;</span>
<span style="color: #008080;"> 6</span> <span style="color: #808080;">///</span><span style="color: #008000;"> 0初始状态；1移动鼠标聚焦name和password输入；2移动鼠标聚焦code输入
</span><span style="color: #008080;"> 7</span> <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;/summary&gt;</span>
<span style="color: #008080;"> 8</span> <span style="color: #0000ff;">int</span> mouse_state = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 9</span> <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;summary&gt;</span>
<span style="color: #008080;">10</span> <span style="color: #808080;">///</span><span style="color: #008000;"> 0初始页面；1登陆页面；2提交代码页面；3查看AC页面
</span><span style="color: #008080;">11</span> <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;/summary&gt;</span>
<span style="color: #008080;">12</span> <span style="color: #0000ff;">int</span> page_state = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">13</span> <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;summary&gt;</span>
<span style="color: #008080;">14</span> <span style="color: #808080;">///</span><span style="color: #008000;"> 0初始情况；1已搜索链接；2代码解析中；3代码解析完毕
</span><span style="color: #008080;">15</span> <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;/summary&gt;</span>
<span style="color: #008080;">16</span> <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;summary&gt;</span>
<span style="color: #008080;">17</span> <span style="color: #808080;">///</span><span style="color: #008000;"> 0:初始状态；1:Queuing状态；2：Accepted状态；3：错误状态
</span><span style="color: #008080;">18</span> <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;/summary&gt;</span>
<span style="color: #008080;">19</span> <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">int</span> AC_state = <span style="color: #800080;">0</span>;</pre>
</div>
<p><strong>搜索答案</strong></p>
<p>　　本程序的核心部分在于爬代码的爬虫的设计，这里调用百度搜索并从搜索结果中解析相关链接，然后转到对应链接提取答案代码。首先我想到的是一般对ACM题目写解答的地方一般是博客，所以顺手写了个从百度搜索结果获取以<a class="message" title="找http://开头含blog的链接作为目标链接" href="https://github.com/beautifulzzzz/C4plus/commit/796c8d17a6d8da88705621f5d77c11e98c430c4e" target="_blank" data-pjax="true">http://开头含blog的链接作为目标链接</a><span class="message">C#代码，用下面的代码顺利找到了杭电1202题的三个可能含有解答代码的链接放在<span style="color: #800000;">D:\\1.txt</span>中：(下面是搜索结果，前一个链接为代码链接)</span></p>
<div class="cnblogs_code">
<pre><span style="color: #000000;">[1]http://blog.csdn.net/vsooda/article/details/7989833
[2]http://blog.csdn.net/libin56842/article/details/8798301
[3]http://blog.csdn.net/lulipeng_cpp/article/details/7496022</span></pre>
</div>
<p><span class="message">　　但是，很快我发现这并不是一个很好的主意！因为通过解析百度搜索结果的html文件会发现搜索结果一般一次在<span class="message">div id="content_left"内</span>列出10条搜索结果，并且一般给出的链接并不是目标地址的直接链接，值得庆幸的是这10条搜索结果排列整齐，而且非直接链接输入浏览器中会转为相应的目的链接，于是又顺手写了个爬这10个链接的程序：(<a href="https://github.com/beautifulzzzz/C4plus/blob/3b9ae4e1ce82ac5aa1b4d2bd0c3e2728e77487b3/%E7%88%AC%E8%99%AB/Program.cs" target="_blank">点击看GitHub中的源码</a>，下面是搜到的结果)</span></p>
<div class="cnblogs_code">
<pre><span style="color: #000000;">[1]http://www.baidu.com/link?url=2O6LRDmjhJM8xn-Igu5wlgkwq5aZfdxxJ4r3RLoX_AzzJrz0vmi3sWTd96ktLE0hQvzR4ea3ejgVZGPElTh6zq
[2]http://www.baidu.com/link?url=jvZjI4hHOKIzBkclLKizXM6CUHbJrWUIS3RyRUryCDKVjsszzs7bqYh7bTwqt306xZgDsIt7dMjAhG-RcdkpCQY1_UGqbXbd9FS0SEdix0u
[3]http://www.baidu.com/link?url=Wf5w0vIJa319PEwImt7JAqKzbLxLSsR1FP4o6LJIwojMR9xgm3gBVvU6uTkxbgMEhJ6uvj2_aScJaZeJC9sbuz-OV4Vjr_pOS6s9MEhRclC
[4]http://www.baidu.com/link?url=KzVFkFeRcnZbRd9-xQ_pSW-qEG9w49FnNk8pJafCGB5JkCTJVrydtcK9A5TAooIp7Efd1kKkg3pbSi8jdZ-5s9gYaGWRCNPpC0dVqch6aZk265kqqDFaxnAQBi6ShYFh
[5]http://www.baidu.com/link?url=1P-1b_x2MtGF5ixNlsflUcv-qokmPg2U4DCcqVvQ8ZMZXhWCnnWt6DKw9HoOb7dI
[6]http://www.baidu.com/link?url=nVipZInn7U4yAyPtkOZRT6N_FNDi_iqYfihdtBt7OUs3LQ_SZXZQu_PoHEsUG8kDAEQvHCUx4Xw79Bf6YybwHhzp0xBEz-buI19fPDQtXbe
[7]http://www.baidu.com/link?url=Kj82Etn86GRJ19AdR3L3BPJvzlRN1K2Cvv2DrqiNFijbvk3FBTPlpnT8iB2jRYzNXQTLeqGrg7w3KhlYjfYzZxsCU4mJGWD3OZVDjIPGrRC
[8]http://www.baidu.com/link?url=WFNnxqS9m-erR9iBWGUCtWP1neSEOPb_Jzi_Qz1PExLy-scAHVk6DY4d1OslE-5Ns_NsX3bb1_tfgWInj1xngq
[9]http://www.baidu.com/link?url=QV5i9N8Xz7JhakxPGHsxBc8oO1zVcVMsYux105JtFB_hFwUse_9f_CKd1M2ll6vZznLsHNt6RwJvKiL2zU_-sc6MhyxL7iHmxqA9oAMigge
[10]http://www.baidu.com/link?url=1kG1wvoAOwdndtSKIr5wE_1TgoYudR_xyKIRQpPK_kVPhGOKkr-qw3TJ1IcIQ3GV0Cbg7Ye_vvPEh31l2gjzpa</span></pre>
</div>
<p><span class="message"><img src="http://images.cnitblog.com/blog2015/506370/201503/142001140897238.png" alt="" width="731" height="398" /></span></p>
<p>&nbsp;　　现在，咱们爬到了链接，那么该如何从杂乱的目标页面中找寻答案代码呢？哈哈，我就不卖关子啦！其实分析众多含有代码的页面可以发现，一般情况下代码是放在body中，而且往往以#include开头（这里只找C或C++写的代码的答案）。所以，根据这个规律我设计了一个首先定位body,然后寻找第一个#include的位置作为代码起始位置，然后找到main，接着根据花括号对称的原理找到代码的结尾位置，从而从html中扣出相应的代码行。(<a href="https://github.com/beautifulzzzz/C4plus/blob/8b015d920d9ffe75a9d66f0f66c44d44eb29dd78/%E7%88%AC%E8%99%AB/Program.cs" target="_blank">代码请见GitHub，其中op_getCode1(string temp, int num)是新增解析目标html的函数</a>)。下面是10个目标页面中找代码的结果，这里仅列出前5个：</p>
<div class="cnblogs_code" onclick="cnblogs_code_show('c6bb535f-cb50-4b37-b8c3-771f14694555')"><img id="code_img_closed_c6bb535f-cb50-4b37-b8c3-771f14694555" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_c6bb535f-cb50-4b37-b8c3-771f14694555" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('c6bb535f-cb50-4b37-b8c3-771f14694555',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_c6bb535f-cb50-4b37-b8c3-771f14694555" class="cnblogs_code_hide">
<pre><span style="color: #008080;">1</span> 没东西</pre>
</div>
<span class="cnblogs_code_collapse">op_getCode2_[1]结果.txt 没有找到</span></div>
<div class="cnblogs_code" onclick="cnblogs_code_show('ea96fb84-b60f-487c-8417-f29d1793ec5a')"><img id="code_img_closed_ea96fb84-b60f-487c-8417-f29d1793ec5a" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_ea96fb84-b60f-487c-8417-f29d1793ec5a" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('ea96fb84-b60f-487c-8417-f29d1793ec5a',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_ea96fb84-b60f-487c-8417-f29d1793ec5a" class="cnblogs_code_hide">
<pre><span style="color: #008080;"> 1</span> #include&lt;iostream&gt;
<span style="color: #008080;"> 2</span>  <span style="color: #800080;">2</span> #include&lt;cstdio&gt;
<span style="color: #008080;"> 3</span>  <span style="color: #800080;">3</span> #include&lt;<span style="color: #0000ff;">string</span>.h&gt;
<span style="color: #008080;"> 4</span>  <span style="color: #800080;">4</span> <span style="color: #0000ff;">#define</span> N 1010
<span style="color: #008080;"> 5</span>  <span style="color: #800080;">5</span> <span style="color: #0000ff;">#define</span> INF 2000000000
<span style="color: #008080;"> 6</span>  <span style="color: #800080;">6</span> 
<span style="color: #008080;"> 7</span>  <span style="color: #800080;">7</span> <span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span><span style="color: #000000;"> std;
</span><span style="color: #008080;"> 8</span>  <span style="color: #800080;">8</span> 
<span style="color: #008080;"> 9</span>  <span style="color: #800080;">9</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> map[N][N],lowcost[N],visited[N],d[N],p[N];
</span><span style="color: #008080;">10</span> <span style="color: #800080;">10</span> 
<span style="color: #008080;">11</span> <span style="color: #800080;">11</span> 
<span style="color: #008080;">12</span> <span style="color: #800080;">12</span> <span style="color: #0000ff;">void</span> dijkstra(<span style="color: #0000ff;">int</span> s,<span style="color: #0000ff;">int</span><span style="color: #000000;"> n)
</span><span style="color: #008080;">13</span> <span style="color: #800080;">13</span><span style="color: #000000;"> {
</span><span style="color: #008080;">14</span> <span style="color: #800080;">14</span>     memset(visited,<span style="color: #0000ff;">false</span>,<span style="color: #0000ff;">sizeof</span><span style="color: #000000;">(visited));
</span><span style="color: #008080;">15</span> <span style="color: #800080;">15</span>     <span style="color: #0000ff;">int</span><span style="color: #000000;"> i,j,k,min;
</span><span style="color: #008080;">16</span> <span style="color: #800080;">16</span>     <span style="color: #0000ff;">for</span>(i=<span style="color: #800080;">1</span>;i&lt;=n;i++<span style="color: #000000;">)
</span><span style="color: #008080;">17</span> <span style="color: #800080;">17</span><span style="color: #000000;">     {
</span><span style="color: #008080;">18</span> <span style="color: #800080;">18</span>         lowcost[i]=<span style="color: #000000;">map[s][i];
</span><span style="color: #008080;">19</span> <span style="color: #800080;">19</span><span style="color: #000000;">     }
</span><span style="color: #008080;">20</span> <span style="color: #800080;">20</span>     d[s]=<span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">21</span> <span style="color: #800080;">21</span>     visited[s]=<span style="color: #0000ff;">true</span><span style="color: #000000;">;
</span><span style="color: #008080;">22</span> <span style="color: #800080;">22</span>     <span style="color: #0000ff;">for</span>(i=<span style="color: #800080;">1</span>;i&lt;n;i++)<span style="color: #008000;">//</span><span style="color: #008000;">我又写成 i&lt;=n 了 调试很久！！！</span>
<span style="color: #008080;">23</span> <span style="color: #800080;">23</span><span style="color: #000000;">     {
</span><span style="color: #008080;">24</span> <span style="color: #800080;">24</span>         min=<span style="color: #000000;">INF;
</span><span style="color: #008080;">25</span> <span style="color: #800080;">25</span>         <span style="color: #0000ff;">for</span>(j=<span style="color: #800080;">1</span>;j&lt;=n;j++<span style="color: #000000;">)
</span><span style="color: #008080;">26</span> <span style="color: #800080;">26</span><span style="color: #000000;">         {
</span><span style="color: #008080;">27</span> <span style="color: #800080;">27</span>             <span style="color: #0000ff;">if</span>(!visited[j]&amp;&amp;min&gt;<span style="color: #000000;">lowcost[j])
</span><span style="color: #008080;">28</span> <span style="color: #800080;">28</span><span style="color: #000000;">             {
</span><span style="color: #008080;">29</span> <span style="color: #800080;">29</span>                 min=<span style="color: #000000;">lowcost[j];
</span><span style="color: #008080;">30</span> <span style="color: #800080;">30</span>                 k=<span style="color: #000000;">j;
</span><span style="color: #008080;">31</span> <span style="color: #800080;">31</span><span style="color: #000000;">             }
</span><span style="color: #008080;">32</span> <span style="color: #800080;">32</span><span style="color: #000000;">         }
</span><span style="color: #008080;">33</span> <span style="color: #800080;">33</span>         d[k]=<span style="color: #000000;">min;
</span><span style="color: #008080;">34</span> <span style="color: #800080;">34</span>         visited[k]=<span style="color: #0000ff;">true</span><span style="color: #000000;">;
</span><span style="color: #008080;">35</span> <span style="color: #800080;">35</span>         <span style="color: #0000ff;">for</span>(j=<span style="color: #800080;">1</span>;j&lt;=n;j++<span style="color: #000000;">)
</span><span style="color: #008080;">36</span> <span style="color: #800080;">36</span><span style="color: #000000;">         {
</span><span style="color: #008080;">37</span> <span style="color: #800080;">37</span>             <span style="color: #0000ff;">if</span>(!visited[j]&amp;&amp;lowcost[j]&gt;map[k][j]+<span style="color: #000000;">d[k])
</span><span style="color: #008080;">38</span> <span style="color: #800080;">38</span>                 lowcost[j]=map[k][j]+<span style="color: #000000;">d[k];
</span><span style="color: #008080;">39</span> <span style="color: #800080;">39</span><span style="color: #000000;">         }
</span><span style="color: #008080;">40</span> <span style="color: #800080;">40</span><span style="color: #000000;">     }
</span><span style="color: #008080;">41</span> <span style="color: #800080;">41</span><span style="color: #000000;"> }
</span><span style="color: #008080;">42</span> <span style="color: #800080;">42</span> 
<span style="color: #008080;">43</span> <span style="color: #800080;">43</span> <span style="color: #0000ff;">int</span> DFS(<span style="color: #0000ff;">int</span> s,<span style="color: #0000ff;">int</span><span style="color: #000000;"> n)
</span><span style="color: #008080;">44</span> <span style="color: #800080;">44</span><span style="color: #000000;"> {
</span><span style="color: #008080;">45</span> <span style="color: #800080;">45</span>     <span style="color: #0000ff;">if</span>(p[s]) <span style="color: #0000ff;">return</span><span style="color: #000000;"> p[s];
</span><span style="color: #008080;">46</span> <span style="color: #800080;">46</span>     <span style="color: #0000ff;">if</span>(s==<span style="color: #800080;">2</span>)  <span style="color: #0000ff;">return</span> <span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;">47</span> <span style="color: #800080;">47</span>     <span style="color: #0000ff;">int</span> i,sum=<span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">48</span> <span style="color: #800080;">48</span>     <span style="color: #0000ff;">for</span>(i=<span style="color: #800080;">1</span>;i&lt;=n;i++<span style="color: #000000;">)
</span><span style="color: #008080;">49</span> <span style="color: #800080;">49</span><span style="color: #000000;">     {
</span><span style="color: #008080;">50</span> <span style="color: #800080;">50</span>         <span style="color: #0000ff;">if</span>(map[s][i]&lt;INF&amp;&amp;d[s]&gt;<span style="color: #000000;">d[i])
</span><span style="color: #008080;">51</span> <span style="color: #800080;">51</span><span style="color: #000000;">         {
</span><span style="color: #008080;">52</span> <span style="color: #800080;">52</span>             <span style="color: #0000ff;">if</span>(p[i]) sum=sum+<span style="color: #000000;">p[i];
</span><span style="color: #008080;">53</span> <span style="color: #800080;">53</span>             <span style="color: #0000ff;">else</span> sum=sum+<span style="color: #000000;">DFS(i,n);
</span><span style="color: #008080;">54</span> <span style="color: #800080;">54</span><span style="color: #000000;">         }
</span><span style="color: #008080;">55</span> <span style="color: #800080;">55</span><span style="color: #000000;">     }
</span><span style="color: #008080;">56</span> <span style="color: #800080;">56</span>     sum=sum+<span style="color: #000000;">p[s];
</span><span style="color: #008080;">57</span> <span style="color: #800080;">57</span>     p[s]=<span style="color: #000000;">sum;
</span><span style="color: #008080;">58</span> <span style="color: #800080;">58</span>     <span style="color: #0000ff;">return</span><span style="color: #000000;"> p[s];
</span><span style="color: #008080;">59</span> <span style="color: #800080;">59</span><span style="color: #000000;"> }
</span><span style="color: #008080;">60</span> <span style="color: #800080;">60</span> 
<span style="color: #008080;">61</span> <span style="color: #800080;">61</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
</span><span style="color: #008080;">62</span> <span style="color: #800080;">62</span><span style="color: #000000;"> {
</span><span style="color: #008080;">63</span> <span style="color: #800080;">63</span>     <span style="color: #0000ff;">int</span><span style="color: #000000;"> i,j,n,m,u,v,w;
</span><span style="color: #008080;">64</span> <span style="color: #800080;">64</span>     <span style="color: #0000ff;">while</span>(cin&gt;&gt;n&amp;&amp;<span style="color: #000000;">n)
</span><span style="color: #008080;">65</span> <span style="color: #800080;">65</span><span style="color: #000000;">     {
</span><span style="color: #008080;">66</span> <span style="color: #800080;">66</span>         cin&gt;&gt;<span style="color: #000000;">m;
</span><span style="color: #008080;">67</span> <span style="color: #800080;">67</span>         memset(p,<span style="color: #800080;">0</span>,<span style="color: #0000ff;">sizeof</span><span style="color: #000000;">(p));
</span><span style="color: #008080;">68</span> <span style="color: #800080;">68</span>         <span style="color: #0000ff;">for</span>(i=<span style="color: #800080;">1</span>;i&lt;=n;i++<span style="color: #000000;">)
</span><span style="color: #008080;">69</span> <span style="color: #800080;">69</span><span style="color: #000000;">         {
</span><span style="color: #008080;">70</span> <span style="color: #800080;">70</span>             <span style="color: #0000ff;">for</span>(j=<span style="color: #800080;">1</span>;j&lt;=n;j++<span style="color: #000000;">)
</span><span style="color: #008080;">71</span> <span style="color: #800080;">71</span><span style="color: #000000;">             {
</span><span style="color: #008080;">72</span> <span style="color: #800080;">72</span>                 map[i][j]=(i==j?<span style="color: #800080;">0</span><span style="color: #000000;">:INF);
</span><span style="color: #008080;">73</span> <span style="color: #800080;">73</span><span style="color: #000000;">             }
</span><span style="color: #008080;">74</span> <span style="color: #800080;">74</span><span style="color: #000000;">         }
</span><span style="color: #008080;">75</span> <span style="color: #800080;">75</span>         <span style="color: #0000ff;">for</span>(i=<span style="color: #800080;">0</span>;i&lt;m;i++<span style="color: #000000;">)
</span><span style="color: #008080;">76</span> <span style="color: #800080;">76</span><span style="color: #000000;">         {
</span><span style="color: #008080;">77</span> <span style="color: #800080;">77</span>             scanf(<span style="color: #800000;">"</span><span style="color: #800000;">%d%d%d</span><span style="color: #800000;">"</span>,&amp;u,&amp;v,&amp;<span style="color: #000000;">w);
</span><span style="color: #008080;">78</span> <span style="color: #800080;">78</span>             map[u][v]=map[v][u]=<span style="color: #000000;">w;
</span><span style="color: #008080;">79</span> <span style="color: #800080;">79</span><span style="color: #000000;">         }
</span><span style="color: #008080;">80</span> <span style="color: #800080;">80</span>         dijkstra(<span style="color: #800080;">2</span><span style="color: #000000;">,n);
</span><span style="color: #008080;">81</span> <span style="color: #800080;">81</span>         cout&lt;&lt;DFS(<span style="color: #800080;">1</span>,n)&lt;&lt;<span style="color: #000000;">endl;
</span><span style="color: #008080;">82</span> <span style="color: #800080;">82</span><span style="color: #000000;">     }
</span><span style="color: #008080;">83</span> <span style="color: #800080;">83</span>     <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">84</span> <span style="color: #800080;">84</span> }</pre>
</div>
<span class="cnblogs_code_collapse">op_getCode2_[2]结果.txt 找到了，但是没有虑掉代码前的行号！</span></div>
<div class="cnblogs_code" onclick="cnblogs_code_show('258f1fae-1cfb-4a34-b4c8-ec5c978e8e3a')"><img id="code_img_closed_258f1fae-1cfb-4a34-b4c8-ec5c978e8e3a" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_258f1fae-1cfb-4a34-b4c8-ec5c978e8e3a" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('258f1fae-1cfb-4a34-b4c8-ec5c978e8e3a',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_258f1fae-1cfb-4a34-b4c8-ec5c978e8e3a" class="cnblogs_code_hide">
<pre><span style="color: #008080;">1</span> 什么也没有</pre>
</div>
<span class="cnblogs_code_collapse">op_getCode2_[3]结果.txt 没有找到</span></div>
<div class="cnblogs_code" onclick="cnblogs_code_show('2fb0fc30-f9f1-4654-93b5-7a4977991b90')"><img id="code_img_closed_2fb0fc30-f9f1-4654-93b5-7a4977991b90" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_2fb0fc30-f9f1-4654-93b5-7a4977991b90" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('2fb0fc30-f9f1-4654-93b5-7a4977991b90',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_2fb0fc30-f9f1-4654-93b5-7a4977991b90" class="cnblogs_code_hide">
<pre><span style="color: #008080;">1</span> #include&lt;iostream&gt;#include&lt;queue&gt;<span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span> std;<span style="color: #0000ff;">const</span> <span style="color: #0000ff;">int</span> inf=<span style="color: #800080;">10000</span>;<span style="color: #0000ff;">int</span> map[<span style="color: #800080;">1005</span>][<span style="color: #800080;">1005</span>];<span style="color: #0000ff;">int</span> hash[<span style="color: #800080;">1005</span>][<span style="color: #800080;">1005</span>];<span style="color: #0000ff;">int</span> n,m,p;<span style="color: #0000ff;">int</span> x1,y1,x2,y2;<span style="color: #0000ff;">int</span> dir[<span style="color: #800080;">4</span>][<span style="color: #800080;">2</span>]={-<span style="color: #800080;">1</span>,<span style="color: #800080;">0</span>,<span style="color: #800080;">1</span>,<span style="color: #800080;">0</span>,<span style="color: #800080;">0</span>,-<span style="color: #800080;">1</span>,<span style="color: #800080;">0</span>,<span style="color: #800080;">1</span>};typedef <span style="color: #0000ff;">struct</span> node{    <span style="color: #0000ff;">int</span> x,y,times,direc;    node(){}    node(<span style="color: #0000ff;">int</span> xx,<span style="color: #0000ff;">int</span> yy,<span style="color: #0000ff;">int</span> tt,<span style="color: #0000ff;">int</span> ff):x(xx),y(yy),times(tt),direc(ff){}}NODE;<span style="color: #0000ff;">bool</span> bfs(){    queue&lt;NODE&gt; q;    NODE temp,tt;    q.push(NODE(x1,y1,<span style="color: #800080;">0</span>,-<span style="color: #800080;">1</span>));    hash[x1][y1]=<span style="color: #800080;">0</span>;    <span style="color: #0000ff;">while</span>(!q.empty())    {        temp=q.front();        q.pop();        <span style="color: #0000ff;">for</span>(<span style="color: #0000ff;">int</span> i=<span style="color: #800080;">0</span>;i&lt;<span style="color: #800080;">4</span>;i++)        {             tt.x=temp.x+dir[i][<span style="color: #800080;">0</span>];             tt.y=temp.y+dir[i][<span style="color: #800080;">1</span>];             <span style="color: #0000ff;">if</span>(temp.direc==-<span style="color: #800080;">1</span>) {tt.direc=i;tt.times=<span style="color: #800080;">0</span>;}             <span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span>(i==temp.direc) {tt.direc=temp.direc;tt.times=temp.times;}             <span style="color: #0000ff;">else</span> {tt.direc=i;tt.times=temp.times+<span style="color: #800080;">1</span>;}             <span style="color: #0000ff;">if</span>(tt.x&gt;=<span style="color: #800080;">1</span>&amp;&amp;tt.x&lt;=n&amp;&amp;tt.y&gt;=<span style="color: #800080;">1</span>&amp;&amp;tt.y&lt;=m&amp;&amp;tt.times&lt;=<span style="color: #800080;">2</span>&amp;&amp;tt.times&lt;=hash[tt.x][tt.y])             {                   <span style="color: #0000ff;">if</span>(map[tt.x][tt.y]==<span style="color: #800080;">0</span>||(tt.x==x2&amp;&amp;tt.y==y2))                   {                         hash[tt.x][tt.y]=tt.times;                         <span style="color: #0000ff;">if</span>(tt.x==x2&amp;&amp;tt.y==y2)                         <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">true</span>;                           q.push(tt);                   }             }         }    }    <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">false</span>;}<span style="color: #0000ff;">int</span> main(){    <span style="color: #0000ff;">while</span>(scanf(<span style="color: #800000;">"</span><span style="color: #800000;">%d%d</span><span style="color: #800000;">"</span>,&amp;n,&amp;m)!=EOF&amp;&amp;(m||n))    {         <span style="color: #0000ff;">int</span> i,j;         <span style="color: #0000ff;">for</span>(i=<span style="color: #800080;">1</span>;i&lt;=n;i++)         <span style="color: #0000ff;">for</span>(j=<span style="color: #800080;">1</span>;j&lt;=m;j++)         scanf(<span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span>,&amp;map[i][j]);         scanf(<span style="color: #800000;">"</span><span style="color: #800000;">%d</span><span style="color: #800000;">"</span>,&amp;p);         <span style="color: #0000ff;">while</span>(p--)         {              <span style="color: #0000ff;">for</span>(i=<span style="color: #800080;">1</span>;i&lt;=n;i++)              <span style="color: #0000ff;">for</span>(j=<span style="color: #800080;">1</span>;j&lt;=m;j++)              hash[i][j]=inf;              scanf(<span style="color: #800000;">"</span><span style="color: #800000;">%d%d%d%d</span><span style="color: #800000;">"</span>,&amp;x1,&amp;y1,&amp;x2,&amp;y2);              <span style="color: #0000ff;">if</span>(map[x1][y1]!=map[x2][y2]||map[x1][y1]==<span style="color: #800080;">0</span>||(x1==x2&amp;&amp;y1==y2)) printf(<span style="color: #800000;">"</span><span style="color: #800000;">NO\n</span><span style="color: #800000;">"</span>);              <span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span>(bfs()) printf(<span style="color: #800000;">"</span><span style="color: #800000;">YES\n</span><span style="color: #800000;">"</span>);              <span style="color: #0000ff;">else</span> printf(<span style="color: #800000;">"</span><span style="color: #800000;">NO\n</span><span style="color: #800000;">"</span>);          }    }    <span style="color: #008000;">//</span><span style="color: #008000;">system("pause");    return 0;}</span></pre>
</div>
<span class="cnblogs_code_collapse">op_getCode2_[4]结果.txt 找到了，但是没有换行！</span></div>
<div class="cnblogs_code" onclick="cnblogs_code_show('451c969c-761e-44ba-98c8-e41048fe44c0')"><img id="code_img_closed_451c969c-761e-44ba-98c8-e41048fe44c0" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_451c969c-761e-44ba-98c8-e41048fe44c0" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('451c969c-761e-44ba-98c8-e41048fe44c0',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_451c969c-761e-44ba-98c8-e41048fe44c0" class="cnblogs_code_hide">
<pre><span style="color: #008080;"> 1</span> #include&lt;stdio.h&gt;
<span style="color: #008080;"> 2</span> 
<span style="color: #008080;"> 3</span> <span style="color: #0000ff;">char</span> str[<span style="color: #800080;">110</span><span style="color: #000000;">];
</span><span style="color: #008080;"> 4</span> 
<span style="color: #008080;"> 5</span> <span style="color: #0000ff;">int</span><span style="color: #000000;"> main()
</span><span style="color: #008080;"> 6</span> 
<span style="color: #008080;"> 7</span> <span style="color: #000000;">{
</span><span style="color: #008080;"> 8</span> 
<span style="color: #008080;"> 9</span>  <span style="color: #0000ff;">int</span><span style="color: #000000;"> i;
</span><span style="color: #008080;">10</span> 
<span style="color: #008080;">11</span>  <span style="color: #0000ff;">while</span><span style="color: #000000;">(gets(str))
</span><span style="color: #008080;">12</span> 
<span style="color: #008080;">13</span> <span style="color: #000000;"> {
</span><span style="color: #008080;">14</span> 
<span style="color: #008080;">15</span>   <span style="color: #0000ff;">for</span>(i=<span style="color: #800080;">0</span>;str[i];i++<span style="color: #000000;">)
</span><span style="color: #008080;">16</span> 
<span style="color: #008080;">17</span> <span style="color: #000000;">  {
</span><span style="color: #008080;">18</span> 
<span style="color: #008080;">19</span>    <span style="color: #0000ff;">if</span>(i==<span style="color: #800080;">0</span>||(str[i-<span style="color: #800080;">1</span>]==<span style="color: #800000;">'
</span><span style="color: #008080;">20</span> <span style="color: #800000;">'</span><span style="color: #800000;">&amp;&amp;str[i]!=</span><span style="color: #800000;">'</span> <span style="color: #800000;">'</span><span style="color: #800000;">))</span>
<span style="color: #008080;">21</span> 
<span style="color: #008080;">22</span>     
<span style="color: #008080;">23</span> putchar(str[i]&amp;<span style="color: #800080;">0xDF</span>);<span style="color: #008000;">//</span><span style="color: #008000;">0x开头的数据是16进制的</span>
<span style="color: #008080;">24</span> &amp;是与运算符 c&amp;<span style="color: #000000;">0xdf是把小写转化为大写
</span><span style="color: #008080;">25</span> <span style="color: #000000;">x20是把大写转化为小写
</span><span style="color: #008080;">26</span> 
<span style="color: #008080;">27</span>     
<span style="color: #008080;">28</span> <span style="color: #0000ff;">else</span><span style="color: #000000;"> putchar(str[i]);
</span><span style="color: #008080;">29</span> 
<span style="color: #008080;">30</span> <span style="color: #000000;">  }
</span><span style="color: #008080;">31</span> 
<span style="color: #008080;">32</span>   putchar(<span style="color: #800000;">'</span><span style="color: #800000;">\n</span><span style="color: #800000;">'</span><span style="color: #000000;">);
</span><span style="color: #008080;">33</span> 
<span style="color: #008080;">34</span> <span style="color: #000000;"> }
</span><span style="color: #008080;">35</span> 
<span style="color: #008080;">36</span>  <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">37</span> 
<span style="color: #008080;">38</span> }</pre>
</div>
<span class="cnblogs_code_collapse">op_getCode2_[5]结果.txt 找到了，完整代码</span></div>
<p>　　从上面得到的结果不难看出：虽然存在一些完美的代码，但是有很大一部分需要修改一下也能变成完美代码！然后我综合分析了上述代码存在的情况：①代码行号没去掉；②html的转译符没有转换成标准字符；③CSS样式没有去掉；④没有有效的换行。针对问题②和问题③粗略的写了一个op_getCode2函数来实现代码精化的问题（<a href="https://github.com/beautifulzzzz/C4plus/blob/dfcaa5232933dfaa7f0c140b0b501a4b7ad5d336/%E7%88%AC%E8%99%AB/Program.cs" target="_blank">详细代码请见GitHub</a>），然后将代码精简下，省去不必要的html下载，尝试下解决问题①和问题④（代码中191行，没有换行是因为&lt;br /&gt;被我直接删除了），并多添加几个html转译符的转换，结果虽然没有解决问题①，但是搜到的代码正确率已经相当高了~于是就偷下懒，不去解决问题问题①了（嘿嘿，其实解决问题①并不难，只是我不想让程序看着太乱&gt;_&lt;，<a href="https://github.com/beautifulzzzz/C4plus/blob/dabc65d9c57a137e6cdd5072e9ada5314420e303/%E7%88%AC%E8%99%AB/Program.cs" target="_blank">最终的完美版代码见GitHub</a>）</p>
<p><strong>自动登录与自动提交</strong></p>
<p>　　进行到这里看似可以大功告成了，其实还差着远呢~我们只是获得了代码，那么该如何自动登录用户并自动提交代码呢？我想到了曾经恶搞的酷我音乐盒（<a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/zjutlitao/p/3893112.html">软硬结合第二篇&mdash;&mdash;酷我音乐盒的逆天玩法</a>），在那次我用到了邪恶的模拟鼠标点击事件来戏弄酷我音乐盒，这次我们也要这么干！yes,用程序发送鼠标事件来伪装成人在操作~但是，如果直接在IE、Google或者火狐浏览器里来操作，不就有点在玩弄这些软件的嫌疑嘛，上次恶搞酷我人家没来找我，这次可不一定呀！哈哈，所以俺还得另寻办法~（☆⌒(*＾-b)v开个玩笑，其实是因为考虑到要更好的操控web页面，所以才采用C#的webBrowser控件的）。下面是模拟鼠标点击事件的相关API，当想点击某个位置时只要调用SetCursorPos将鼠标位置设置为相应位置，然后发送一个Down和一个Up消息就完成了一次点击模拟~如果想移动滚动条只要设置位置-&gt;Down-&gt;设置新位置-&gt;Up~</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;">1</span> <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">readonly</span> <span style="color: #0000ff;">int</span> MOUSEEVENTF_LEFTDOWN = <span style="color: #800080;">0x2</span><span style="color: #000000;">;
</span><span style="color: #008080;">2</span> <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">readonly</span> <span style="color: #0000ff;">int</span> MOUSEEVENTF_LEFTUP = <span style="color: #800080;">0x4</span><span style="color: #000000;">;
</span><span style="color: #008080;">3</span> [DllImport(<span style="color: #800000;">"</span><span style="color: #800000;">user32</span><span style="color: #800000;">"</span><span style="color: #000000;">)]
</span><span style="color: #008080;">4</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">extern</span> <span style="color: #0000ff;">void</span> mouse_event(<span style="color: #0000ff;">int</span> dwFlags, <span style="color: #0000ff;">int</span> dx, <span style="color: #0000ff;">int</span> dy, <span style="color: #0000ff;">int</span> dwData, <span style="color: #0000ff;">int</span><span style="color: #000000;"> dwExtraInfo);
</span><span style="color: #008080;">5</span> [DllImport(<span style="color: #800000;">"</span><span style="color: #800000;">user32.dll</span><span style="color: #800000;">"</span>, EntryPoint = <span style="color: #800000;">"</span><span style="color: #800000;">SetCursorPos</span><span style="color: #800000;">"</span><span style="color: #000000;">)]
</span><span style="color: #008080;">6</span> <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">extern</span> <span style="color: #0000ff;">int</span> SetCursorPos(<span style="color: #0000ff;">int</span> x, <span style="color: #0000ff;">int</span><span style="color: #000000;"> y);
</span><span style="color: #008080;">7</span> [DllImport(<span style="color: #800000;">"</span><span style="color: #800000;">user32.dll</span><span style="color: #800000;">"</span><span style="color: #000000;">)]
</span><span style="color: #008080;">8</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">extern</span> <span style="color: #0000ff;">bool</span> GetCursorPos(<span style="color: #0000ff;">out</span> Point pt);</pre>
</div>
<p>　　可是问题又来了，如果只能用鼠标点点肯定是不能完成复杂的提交代码工作的！于是想到了另一个邪恶的东西：模拟键盘消息~嘻嘻，这次我就能往对应的地方输东西了。 如下：当鼠标将输入聚焦移动到用户名的输入框后，调用SendKeys向对应对话框内输入用户名，然后发送Tab键转至密码输入框，输入密码，最后发送回车，实现登陆！哈哈，怎么样？够不够炫酷呢？用我刚刚介绍的2个邪恶的工具再结合我玩酷我音乐盒时用的获得窗口句柄来控制窗口的手段，大家应能能想到对QQ聊天做点什么邪恶的事啦（是不是想到做一个和别人自动聊天的机器人呢？）</p>
<p><img src="http://images.cnitblog.com/blog2015/506370/201503/142201567776954.png" alt="" width="490" height="145" /></p>
<p>　　别得意太早，上面只是我们自以为软件会很听话的SendKeys("A")它就往框里输入A，可实际情况要糟糕的多~因为有输入法的存在，所以在我尝试往提交代码的框里发送code代码时问题就出现了~试一下，当你的系统处于智能中文输入法时，你想在某个框内输入诸如"wos1"时会出现什么效果呢？那么，我们如何来解决这个问题呢？哈哈，我又想到了办法&mdash;&mdash;利用剪切板：我们板code复制到剪切板，然后在对应的代码提交框内只要发送Ctrl+V即可实现代码粘贴（我真是太奸诈啦，哈哈哈哈）</p>
<p><strong><img src="http://images.cnitblog.com/blog2015/506370/201503/142213335425186.png" alt="" width="598" height="116" /></strong></p>
<p><strong>零碎的细节</strong></p>
<p>　　到这里基本上已经算完成了，但是一个没有反馈的系统怎么能算智能呢？于是我又对HDU OJ的提交代码后的状态list页面进行解析，找到我的最新提交结果：如果AC了就做下一题，如果正在测试就再次刷新一遍知道有确定结果，如果错了就尝试下一个链接，直到10个链接全部试完转到下一题。这里要特别说明下，由于html下载与解析会造成长延时，如果放在主线程中去做会导致程序一卡一卡的，于是我将isAccept函数和另外两个分别用于找10个链接的函数operator0、对某一个链接的目标页面进行解析提取代码的函数op_getCode1分别采用线程异步计算，这里和上面实验过程中采用的主线程中直接处理有不同，要稍微注意下。更多请看详细代码：<a href="https://github.com/beautifulzzzz/C4plus/tree/master/hdu_AC%E8%87%AA%E5%8A%A8%E6%9C%BA" target="_blank">https://github.com/beautifulzzzz/C4plus/tree/master/hdu_AC自动机</a></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('dc04ea32-14de-4c59-a0f6-6852227d0b64')"><img id="code_img_closed_dc04ea32-14de-4c59-a0f6-6852227d0b64" class="code_img_closed" src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt="" /><img id="code_img_opened_dc04ea32-14de-4c59-a0f6-6852227d0b64" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('dc04ea32-14de-4c59-a0f6-6852227d0b64',event)" src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif" alt="" />
<div id="cnblogs_code_open_dc04ea32-14de-4c59-a0f6-6852227d0b64" class="cnblogs_code_hide">
<pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> <span style="color: #0000ff;">void</span> isAccept(<span style="color: #0000ff;">object</span><span style="color: #000000;"> obj)
</span><span style="color: #008080;"> 2</span> <span style="color: #000000;">{
</span><span style="color: #008080;"> 3</span>     <span style="color: #0000ff;">try</span>
<span style="color: #008080;"> 4</span> <span style="color: #000000;">    {
</span><span style="color: #008080;"> 5</span>         html = html.Substring(html.IndexOf(<span style="color: #800000;">"</span><span style="color: #800000;">table_text</span><span style="color: #800000;">"</span><span style="color: #000000;">));
</span><span style="color: #008080;"> 6</span>         html = html.Substring(html.IndexOf(<span style="color: #800000;">"</span><span style="color: #800000;">table_header</span><span style="color: #800000;">"</span><span style="color: #000000;">));
</span><span style="color: #008080;"> 7</span>         html = html.Substring(html.IndexOf(<span style="color: #800000;">"</span><span style="color: #800000;">center</span><span style="color: #800000;">"</span>) + <span style="color: #800080;">5</span><span style="color: #000000;">);
</span><span style="color: #008080;"> 8</span>         <span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">0</span>; i &lt; <span style="color: #800080;">15</span>; i++<span style="color: #000000;">)
</span><span style="color: #008080;"> 9</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">10</span>             html = html.Substring(html.IndexOf(<span style="color: #800000;">"</span><span style="color: #800000;">center</span><span style="color: #800000;">"</span>) + <span style="color: #800080;">5</span><span style="color: #000000;">);
</span><span style="color: #008080;">11</span>             <span style="color: #0000ff;">string</span> temp = html.Substring(<span style="color: #800080;">0</span>, html.IndexOf(<span style="color: #800000;">"</span><span style="color: #800000;">&lt;/tr&gt;</span><span style="color: #800000;">"</span><span style="color: #000000;">));
</span><span style="color: #008080;">12</span>             <span style="color: #0000ff;">int</span> find1 = temp.LastIndexOf(<span style="color: #800000;">"</span><span style="color: #800000;">userstatus.php?user=</span><span style="color: #800000;">"</span>) + <span style="color: #800080;">20</span><span style="color: #000000;">;
</span><span style="color: #008080;">13</span>             <span style="color: #0000ff;">int</span> length1 = temp.Substring(find1).IndexOf(<span style="color: #800000;">'</span><span style="color: #800000;">"</span><span style="color: #800000;">'</span><span style="color: #000000;">);
</span><span style="color: #008080;">14</span>             <span style="color: #0000ff;">int</span> find2 = temp.IndexOf(<span style="color: #800000;">"</span><span style="color: #800000;">font color=</span><span style="color: #800000;">"</span>) + <span style="color: #800080;">11</span><span style="color: #000000;">;
</span><span style="color: #008080;">15</span>             <span style="color: #0000ff;">int</span> length2 = <span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">16</span>             <span style="color: #0000ff;">while</span> (find2 &lt; temp.Length &amp;&amp; temp[find2] != <span style="color: #800000;">'</span><span style="color: #800000;">&gt;</span><span style="color: #800000;">'</span>) find2++<span style="color: #000000;">;
</span><span style="color: #008080;">17</span>             find2++<span style="color: #000000;">;
</span><span style="color: #008080;">18</span>             <span style="color: #0000ff;">while</span> (find2 + length2 &lt; temp.Length &amp;&amp; temp[find2 + length2] != <span style="color: #800000;">'</span><span style="color: #800000;">&lt;</span><span style="color: #800000;">'</span>) length2++<span style="color: #000000;">;
</span><span style="color: #008080;">19</span>             <span style="color: #0000ff;">string</span> user =<span style="color: #000000;"> temp.Substring(find1, length1);
</span><span style="color: #008080;">20</span>             <span style="color: #0000ff;">string</span> state =<span style="color: #000000;"> temp.Substring(find2, length2);
</span><span style="color: #008080;">21</span>             show += <span style="color: #800000;">"</span><span style="color: #800000;">user : </span><span style="color: #800000;">"</span> + user + <span style="color: #800000;">"</span><span style="color: #800000;">\r\n</span><span style="color: #800000;">"</span><span style="color: #000000;">;
</span><span style="color: #008080;">22</span>             show += <span style="color: #800000;">"</span><span style="color: #800000;">state: </span><span style="color: #800000;">"</span> + state + <span style="color: #800000;">"</span><span style="color: #800000;">\r\n</span><span style="color: #800000;">"</span><span style="color: #000000;">;
</span><span style="color: #008080;">23</span>             <span style="color: #0000ff;">if</span> (user.Equals(<span style="color: #800000;">"</span><span style="color: #800000;">beautifulzzzz1</span><span style="color: #800000;">"</span><span style="color: #000000;">))
</span><span style="color: #008080;">24</span> <span style="color: #000000;">            {
</span><span style="color: #008080;">25</span>                 <span style="color: #0000ff;">if</span> (state.Equals(<span style="color: #800000;">"</span><span style="color: #800000;">Queuing</span><span style="color: #800000;">"</span>) || state.Equals(<span style="color: #800000;">"</span><span style="color: #800000;">Compiling</span><span style="color: #800000;">"</span>) || state.Equals(<span style="color: #800000;">"</span><span style="color: #800000;">Running</span><span style="color: #800000;">"</span><span style="color: #000000;">))
</span><span style="color: #008080;">26</span> <span style="color: #000000;">                {
</span><span style="color: #008080;">27</span>                     AC_state = <span style="color: #800080;">1</span><span style="color: #000000;">;
</span><span style="color: #008080;">28</span> <span style="color: #000000;">                }
</span><span style="color: #008080;">29</span>                 <span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span> (state.Equals(<span style="color: #800000;">"</span><span style="color: #800000;">Accepted</span><span style="color: #800000;">"</span><span style="color: #000000;">))
</span><span style="color: #008080;">30</span> <span style="color: #000000;">                {
</span><span style="color: #008080;">31</span>                     AC_state = <span style="color: #800080;">2</span><span style="color: #000000;">;
</span><span style="color: #008080;">32</span> <span style="color: #000000;">                }
</span><span style="color: #008080;">33</span>                 <span style="color: #0000ff;">else</span>
<span style="color: #008080;">34</span> <span style="color: #000000;">                {
</span><span style="color: #008080;">35</span>                     AC_state = <span style="color: #800080;">3</span><span style="color: #000000;">;
</span><span style="color: #008080;">36</span> <span style="color: #000000;">                }
</span><span style="color: #008080;">37</span>                 <span style="color: #0000ff;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">38</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">39</span>             <span style="color: #008000;">//</span><span style="color: #008000;">show += temp + "\r\n";</span>
<span style="color: #008080;">40</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">41</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">42</span>     <span style="color: #0000ff;">catch</span><span style="color: #000000;">(Exception e)
</span><span style="color: #008080;">43</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">44</span>         input_state = <span style="color: #800080;">3</span><span style="color: #000000;">;
</span><span style="color: #008080;">45</span>         search_state = <span style="color: #800080;">2</span><span style="color: #000000;">;
</span><span style="color: #008080;">46</span>         AC_state = <span style="color: #800080;">3</span><span style="color: #000000;">;
</span><span style="color: #008080;">47</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">48</span> }</pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<p><strong>后记</strong></p>
<p>　　这几天忙着准备2015实习面试，所以也没太多时间研究这些好玩的东西啦~谨以此篇博客证明我还活着，哈哈！其实楼主脑子里还有很多炫酷的事，比如让机器自编程、让一些低级CPU学会交流与联合、在全网内养殖虚拟机器人控制舆论...不过，这都要放放，首先得解决温饱问题，不然注定孤独寂寞冷呀~</p>
<p>&nbsp;</p>
<p><span style="color: #ff0000;"><strong>相关链接</strong></span></p>
<p>HDU AC自动机最终工程：<a href="https://github.com/beautifulzzzz/C4plus/tree/master/hdu_AC%E8%87%AA%E5%8A%A8%E6%9C%BA" target="_blank">https://github.com/beautifulzzzz/C4plus/tree/master/hdu_AC自动机</a></p>
<p>HDU AC自动机实验版(要会用Github看历史版本!)：<a href="https://github.com/beautifulzzzz/C4plus/tree/master/%E7%88%AC%E8%99%AB" target="_blank">https://github.com/beautifulzzzz/C4plus/tree/master/爬虫</a></p>
<p>&nbsp;</p></div><div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="BlogPostCategory"></div>
<div id="EntryTag"></div>
<div id="blog_post_info">
</div>
<div class="clear"></div>
<div id="post_next_prev"></div>
</div>


		</div>
		<div class = "postDesc">posted @ <span id="post-date">2015-03-14 22:49</span> <a href='http://www.cnblogs.com/zjutlitao/'>beautifulzzzz</a> 阅读(<span id="post_view_count">...</span>) 评论(<span id="post_comment_count">...</span>)  <a href ="http://i.cnblogs.com/EditPosts.aspx?postid=4337775" rel="nofollow">编辑</a> <a href="#" onclick="AddToWz(4337775);return false;">收藏</a></div>
	</div>
	<script type="text/javascript">var allowComments=true,isLogined=false,cb_blogId=158504,cb_entryId=4337775,cb_blogApp=currentBlogApp,cb_blogUserGuid='21a78b91-3390-e211-9010-c3d7423e3b07',cb_entryCreatedDate='2015/3/14 22:49:00';loadViewCount(cb_entryId);</script>
	
</div><!--end: topics 文章、评论容器-->
</div><a name="!comments"></a><div id="blog-comments-placeholder"></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>
<div id="comment_form" class="commentform">
<a name="commentform"></a>
<div id="divCommentShow"></div>
<div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" id="lnk_RefreshComments" onclick="return RefreshCommentList();">刷新评论</a><a href="#" onclick="return RefreshPage();">刷新页面</a><a href="#top">返回顶部</a></div>
<div id="comment_form_container"></div>
<div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
<div id="site_nav_under"><a href="http://www.cnblogs.com/" target="_blank" title="开发者的网上家园">博客园首页</a><a href="http://q.cnblogs.com/" target="_blank" title="程序员问答社区">博问</a><a href="http://news.cnblogs.com/" target="_blank" title="IT新闻">新闻</a><a href="http://home.cnblogs.com/ing/" target="_blank">闪存</a><a href="http://job.cnblogs.com/" target="_blank">程序员招聘</a><a href="http://kb.cnblogs.com/" target="_blank">知识库</a></div>
<div id="opt_under_post"></div>
<script type="text/javascript">
    var enableGoogleAd = canShowAdsense(); 
    fixPostBodyFormat();
</script>
<script type='text/javascript'>
  var googletag = googletag || {};
  googletag.cmd = googletag.cmd || [];
    (function () {
        if (enableGoogleAd) {
            var gads = document.createElement('script');
            gads.async = true;
            gads.type = 'text/javascript';
            var useSSL = 'https:' == document.location.protocol;
            gads.src = (useSSL ? 'https:' : 'http:') +
              '//www.googletagservices.com/tag/js/gpt.js';
            var node = document.getElementsByTagName('script')[0];
            node.parentNode.insertBefore(gads, node);
        }
  })();
</script>
<script type='text/javascript'>
    try {
        if (enableGoogleAd) {
            googletag.cmd.push(function() {
            googletag.defineSlot('/1090369/cnblogs_blogpost_C2', [468, 60], 'div-gpt-ad-1433581717989-0').addService(googletag.pubads());
            googletag.defineSlot('/1090369/cnblogs_blogpost_C1_sitehome', [300, 250], 'div-gpt-ad-1433581717989-1').addService(googletag.pubads());
            googletag.pubads().enableSingleRequest();
            googletag.pubads().collapseEmptyDivs();
            googletag.enableServices();
            });
        };
    } catch (e) { }
</script>
<div id="google_ad_c1" class="c_ad_block">
    <div id='div-gpt-ad-1433581717989-1' style='height:250px; width:300px;'>
    <script type='text/javascript'>
        try {
            if (enableGoogleAd) {
                googletag.cmd.push(function () { googletag.display('div-gpt-ad-1433581717989-1'); });
            } else {
                $('#div-gpt-ad-1433581717989-1').hide();
            }
    } catch (e) { }
    </script>
    </div>
</div>
<div id="under_post_news"></div>
<div id="google_ad_c2" class="c_ad_block">
<div id='div-gpt-ad-1433581717989-0' style='height:60px; width:468px;'>
<script type='text/javascript'>
try {
    if (enableGoogleAd) {
        googletag.cmd.push(function () { googletag.display('div-gpt-ad-1433581717989-0'); });
    } else {
        $('#div-gpt-ad-1433581717989-0').hide();
    }
} catch (e) { }
</script>
</div>
</div>
<div id="under_post_kb"></div>
<div id="HistoryToday" class="c_ad_block"></div>
<script type="text/javascript">
$(function () {
    loadNewsAndKb();
    loadBlogSignature();
    LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
    GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate);
    loadOptUnderPost();
    GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);
    setTimeout(function () { incrementViewCount(cb_entryId); }, 200);
});
</script>
</div>

	</div><!--end: forFlow -->
	</div><!--end: mainContent 主体内容容器-->

	<div id="sideBar">
		<div id="sideBarMain">
			
<!--done-->
<div class="newsItem">
<h3 class="catListTitle">公告</h3>
	<div id="blog-news"></div><script type="text/javascript">loadBlogNews();</script>
</div>

			<div id="calendar"><div id="blog-calendar" style="display:none"></div><script type="text/javascript">loadBlogDefaultCalendar();</script></div>
			
			<DIV id="leftcontentcontainer">
				<div id="blog-sidecolumn"></div><script type="text/javascript">loadBlogSideColumn();</script>
			</DIV>
			
		</div><!--end: sideBarMain -->
	</div><!--end: sideBar 侧边栏容器 -->
	<div class="clear"></div>
	</div><!--end: main -->
	<div class="clear"></div>
	<div id="footer">
		
<!--done-->
Copyright &copy;2015 beautifulzzzz
	</div><!--end: footer -->
</div><!--end: home 自定义的最大容器 -->
<!--PageEndHtml Block Begin-->
<script src="http://files.cnblogs.com/files/zjutlitao/tao1.js"></script>
<script src="http://files.cnblogs.com/files/zjutlitao/tagscloud.js"></script>
<!--PageEndHtml Block End-->
</body>
</html>
